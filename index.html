<!DOCTYPE html>
<html>
  <head>
    <title>Rock Paper Sissors</title>
    <link href='http://fonts.googleapis.com/css?family=Luckiest+Guy' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="src/style.css">
    <script src="./src/jquery.js"></script>
  </head>
  <body>
    <header>
      <h1>Rock Paper Scissors</h1>
    </header>
    <main>
      <section>
        <artical id="Rock" data-position-in-gestures-array=0><img src="img/rock.svg"></artical>
        <artical id="Paper" data-position-in-gestures-array=1>    <img src="img/paper.svg">   </artical>
        <artical id="Scissors" data-position-in-gestures-array=2> <img src="img/sissors.svg"> </artical>
      </section>
    </main>
    <audio id="wizzBop">
      <source src='./src/wizzBop.wav'>
      <source src='./src/wizzBop.mp3'>
    </audio>

    
    <script src="./src/RockPaperSiss.js"></script>
    <script>
    $(document).on('ready', function(){

      var gestures = [new Rock, new Paper, new Scissors];

      var result;

      var play = function(){
        $('#wizzBop').get(0).play()
      };
      var get_ai_gesture = function() {
        var pickRandom = (Math.floor(Math.random()*3)+1)-1
        return gestures[pickRandom]
      };
      var flashMessage = function(result) {
        if( result) $('header h1').text("Win" )
        if(!result) $('header h1').text("Lose")
        if(result === 'Draw') $('header h1').text(result)
        setTimeout(function(){
           $('header h1').text("Rock Paper Scissors");
        },1500)
      };

      var flashAnimation = function(gesture) {
        play();
        $('artical').hide();
        $('#'+gesture.id).show().toggleClass('win');
        setTimeout(function() {
          $('#'+gesture.id).toggleClass('win');
          $('artical').show();
        }, 1500)
      };

      $('artical').click(function(){
        var my_gesture = gestures[$(this).data('position-in-gestures-array')];
        var ai_gesture = get_ai_gesture()
        var result = my_gesture.against(ai_gesture)
        flashAnimation($(this).get(0))
        flashMessage(result)
      })

    });
    </script>
  </body>
</html>